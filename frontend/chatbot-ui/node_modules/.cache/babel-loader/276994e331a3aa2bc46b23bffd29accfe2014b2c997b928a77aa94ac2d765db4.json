{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import{Card,CardContent,TextField,Button,Typography}from\"@mui/material\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Chatbot=()=>{const[messages,setMessages]=useState([]);const[input,setInput]=useState(\"\");const chatBoxRef=useRef(null);useEffect(()=>{if(chatBoxRef.current){chatBoxRef.current.scrollTop=chatBoxRef.current.scrollHeight;}},[messages]);const sendMessage=async()=>{if(!input.trim())return;setMessages([...messages,{text:input,sender:\"user\"}]);try{const response=await fetch(\"http://127.0.0.1:5000/chat\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({session_id:\"user1\",query:input})});const data=await response.json();setMessages([...messages,{text:input,sender:\"user\"},{text:data.response,sender:\"bot\"}]);}catch(error){console.error(\"Error:\",error);setMessages([...messages,{text:\"Error occurred\",sender:\"bot\"}]);}//setInput(\"\");\nconst userMessage={text:input,sender:\"user\"};setMessages(prevMessages=>[...prevMessages,userMessage]);setInput(\"\");// Clears input immediately after sending\n};return/*#__PURE__*/_jsx(Card,{sx:{maxWidth:400,margin:\"auto\",mt:5,boxShadow:3},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",align:\"center\",children:\"Chatbot\"}),/*#__PURE__*/_jsx(\"div\",{ref:chatBoxRef,style:{height:300,overflowY:\"auto\",marginBottom:10},children:messages.map((msg,index)=>/*#__PURE__*/_jsx(Typography,{sx:{textAlign:msg.sender===\"user\"?\"right\":\"left\",backgroundColor:msg.sender===\"user\"?\"#007bff\":\"#f1f1f1\",color:msg.sender===\"user\"?\"white\":\"black\",padding:\"8px\",borderRadius:\"10px\",margin:\"5px 0\",display:\"inline-block\",maxWidth:\"80%\"},children:msg.text},index))}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,variant:\"outlined\",placeholder:\"Type a message...\",value:input,onChange:e=>setInput(e.target.value),onKeyDown:e=>e.key===\"Enter\"&&sendMessage()}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",color:\"primary\",onClick:sendMessage,sx:{mt:2},children:\"Send\"})]})});};export default Chatbot;","map":{"version":3,"names":["React","useState","useEffect","useRef","Card","CardContent","TextField","Button","Typography","jsx","_jsx","jsxs","_jsxs","Chatbot","messages","setMessages","input","setInput","chatBoxRef","current","scrollTop","scrollHeight","sendMessage","trim","text","sender","response","fetch","method","headers","body","JSON","stringify","session_id","query","data","json","error","console","userMessage","prevMessages","sx","maxWidth","margin","mt","boxShadow","children","variant","align","ref","style","height","overflowY","marginBottom","map","msg","index","textAlign","backgroundColor","color","padding","borderRadius","display","fullWidth","placeholder","value","onChange","e","target","onKeyDown","key","onClick"],"sources":["/Users/omerfaruk/ChatBot_v1/frontend/chatbot-ui/src/Chatbot.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { Card, CardContent, TextField, Button, Typography } from \"@mui/material\";\n\nconst Chatbot = () => {\n    const [messages, setMessages] = useState([]);\n    const [input, setInput] = useState(\"\");\n    const chatBoxRef = useRef(null);\n\n     useEffect(() => {\n        if (chatBoxRef.current) {\n            chatBoxRef.current.scrollTop = chatBoxRef.current.scrollHeight;\n        }\n    }, [messages]);\n\n    const sendMessage = async () => {\n        if (!input.trim()) return;\n    \n        setMessages([...messages, { text: input, sender: \"user\" }]);\n    \n        try {\n            const response = await fetch(\"http://127.0.0.1:5000/chat\", {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify({ session_id: \"user1\", query: input })\n            });\n    \n            const data = await response.json();\n            setMessages([...messages, { text: input, sender: \"user\" }, { text: data.response, sender: \"bot\" }]);\n        } catch (error) {\n            console.error(\"Error:\", error);\n            setMessages([...messages, { text: \"Error occurred\", sender: \"bot\" }]);\n        }\n    \n        //setInput(\"\");\n        const userMessage = { text: input, sender: \"user\" };\n        setMessages((prevMessages) => [...prevMessages, userMessage]);\n        setInput(\"\"); // Clears input immediately after sending\n    };\n    \n\n    return (\n        <Card sx={{ maxWidth: 400, margin: \"auto\", mt: 5, boxShadow: 3 }}>\n            <CardContent>\n                <Typography variant=\"h6\" align=\"center\">Chatbot</Typography>\n                <div ref={chatBoxRef} style={{ height: 300, overflowY: \"auto\", marginBottom: 10 }}>\n                    {messages.map((msg, index) => (\n                        <Typography key={index} sx={{\n                            textAlign: msg.sender === \"user\" ? \"right\" : \"left\",\n                            backgroundColor: msg.sender === \"user\" ? \"#007bff\" : \"#f1f1f1\",\n                            color: msg.sender === \"user\" ? \"white\" : \"black\",\n                            padding: \"8px\",\n                            borderRadius: \"10px\",\n                            margin: \"5px 0\",\n                            display: \"inline-block\",\n                            maxWidth: \"80%\"\n                        }}>\n                            {msg.text}\n                        </Typography>\n                    ))}\n                </div>\n                <TextField\n                    fullWidth\n                    variant=\"outlined\"\n                    placeholder=\"Type a message...\"\n                    value={input}\n                    onChange={(e) => setInput(e.target.value)}\n                    onKeyDown={(e) => e.key === \"Enter\" && sendMessage()}\n                />\n                <Button fullWidth variant=\"contained\" color=\"primary\" onClick={sendMessage} sx={{ mt: 2 }}>\n                    Send\n                </Button>\n            </CardContent>\n        </Card>\n    );\n};\n\nexport default Chatbot;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}