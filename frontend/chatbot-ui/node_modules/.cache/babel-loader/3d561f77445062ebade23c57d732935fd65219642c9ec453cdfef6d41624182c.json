{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import{Card,CardContent,TextField,Button,Typography,IconButton}from\"@mui/material\";import ChatIcon from\"@mui/icons-material/Chat\";import CloseIcon from\"@mui/icons-material/Close\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Chatbot=()=>{const[messages,setMessages]=useState([]);const[input,setInput]=useState(\"\");const[isOpen,setIsOpen]=useState(false);const chatBoxRef=useRef(null);useEffect(()=>{const handleClickOutside=event=>{if(isOpen&&chatBoxRef.current&&!chatBoxRef.current.contains(event.target)){setIsOpen(false);}};document.addEventListener(\"mousedown\",handleClickOutside);return()=>{document.removeEventListener(\"mousedown\",handleClickOutside);};},[isOpen]);const sendMessage=async()=>{if(!input.trim())return;const userMessage={text:input,sender:\"user\"};setMessages(prevMessages=>[...prevMessages,userMessage]);setInput(\"\");try{const response=await fetch(\"http://127.0.0.1:5000/chat\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({session_id:\"user1\",query:input})});const data=await response.json();const botMessage={text:data.response,sender:\"bot\"};setMessages(prevMessages=>[...prevMessages,botMessage]);}catch(error){console.error(\"Error:\",error);setMessages(prevMessages=>[...prevMessages,{text:\"Error occurred\",sender:\"bot\"}]);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IconButton,{onClick:toggleChat,sx:{position:\"fixed\",bottom:20,right:20,backgroundColor:\"#007bff\",color:\"white\",width:120,height:120,\"&:hover\":{backgroundColor:\"#0056b3\"}},children:isOpen?/*#__PURE__*/_jsx(CloseIcon,{}):/*#__PURE__*/_jsx(ChatIcon,{})}),isOpen&&/*#__PURE__*/_jsx(Card,{sx:{position:\"fixed\",bottom:isOpen?80:0,right:20,width:350,height:isOpen?450:0,boxShadow:isOpen?5:0,display:\"flex\",flexDirection:\"column\",opacity:isOpen?1:0,transition:\"opacity 0.3s ease-in-out, height 0.3s ease-in-out\"},children:/*#__PURE__*/_jsxs(CardContent,{sx:{flex:1,display:\"flex\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",align:\"center\",children:\"Chatbot\"}),/*#__PURE__*/_jsx(\"div\",{ref:chatBoxRef,style:{flex:1,overflowY:\"auto\",padding:\"10px\"},children:messages.map((msg,index)=>/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:msg.sender===\"user\"?\"flex-end\":\"flex-start\",marginBottom:\"10px\"},children:/*#__PURE__*/_jsx(Typography,{sx:{backgroundColor:msg.sender===\"user\"?\"#007bff\":\"#f1f1f1\",color:msg.sender===\"user\"?\"white\":\"black\",padding:\"10px\",borderRadius:\"15px\",maxWidth:\"75%\",wordWrap:\"break-word\",textAlign:\"left\",lineHeight:\"1.4\"},children:msg.text})},index))}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,variant:\"outlined\",placeholder:\"Type a message...\",value:input,onChange:e=>setInput(e.target.value),onKeyDown:e=>e.key===\"Enter\"&&sendMessage()}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",color:\"primary\",onClick:sendMessage,sx:{mt:1},children:\"Send\"})]})})]});};export default Chatbot;","map":{"version":3,"names":["React","useState","useEffect","useRef","Card","CardContent","TextField","Button","Typography","IconButton","ChatIcon","CloseIcon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Chatbot","messages","setMessages","input","setInput","isOpen","setIsOpen","chatBoxRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","sendMessage","trim","userMessage","text","sender","prevMessages","response","fetch","method","headers","body","JSON","stringify","session_id","query","data","json","botMessage","error","console","children","onClick","toggleChat","sx","position","bottom","right","backgroundColor","color","width","height","boxShadow","display","flexDirection","opacity","transition","flex","variant","align","ref","style","overflowY","padding","map","msg","index","justifyContent","marginBottom","borderRadius","maxWidth","wordWrap","textAlign","lineHeight","fullWidth","placeholder","value","onChange","e","onKeyDown","key","mt"],"sources":["/Users/omerfaruk/ChatBot_v1/frontend/chatbot-ui/src/Chatbot.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { Card, CardContent, TextField, Button, Typography, IconButton } from \"@mui/material\";\nimport ChatIcon from \"@mui/icons-material/Chat\";\nimport CloseIcon from \"@mui/icons-material/Close\";\n\nconst Chatbot = () => {\n    const [messages, setMessages] = useState([]);\n    const [input, setInput] = useState(\"\");\n    const [isOpen, setIsOpen] = useState(false);\n    const chatBoxRef = useRef(null);\n\n    useEffect(() => {\n        const handleClickOutside = (event) => {\n            if (isOpen && chatBoxRef.current && !chatBoxRef.current.contains(event.target)) {\n                setIsOpen(false);\n            }\n        };\n        document.addEventListener(\"mousedown\", handleClickOutside);\n        return () => {\n            document.removeEventListener(\"mousedown\", handleClickOutside);\n        };\n    }, [isOpen]);\n\n    const sendMessage = async () => {\n        if (!input.trim()) return;\n    \n        const userMessage = { text: input, sender: \"user\" };\n        setMessages((prevMessages) => [...prevMessages, userMessage]);\n        setInput(\"\");\n    \n        try {\n            const response = await fetch(\"http://127.0.0.1:5000/chat\", {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify({ session_id: \"user1\", query: input })\n            });\n\n            const data = await response.json();\n            const botMessage = { text: data.response, sender: \"bot\" };\n            setMessages((prevMessages) => [...prevMessages, botMessage]);\n        } catch (error) {\n            console.error(\"Error:\", error);\n            setMessages((prevMessages) => [...prevMessages, { text: \"Error occurred\", sender: \"bot\" }]);\n\n        }\n        \n    };\n    \n\n    return (\n        <>\n            {/* Floating Button to Toggle Chat */}\n            <IconButton \n                onClick={toggleChat} \n                sx={{\n                    position: \"fixed\",\n                    bottom: 20,\n                    right: 20,\n                    backgroundColor: \"#007bff\",\n                    color: \"white\",\n                    width: 120,\n                    height: 120,\n                    \"&:hover\": { backgroundColor: \"#0056b3\" }\n                }}\n            >\n                {isOpen ? <CloseIcon /> : <ChatIcon />}\n            </IconButton>\n\n            {/* Chatbot Popup */}\n            {isOpen && (\n                <Card sx={{\n                    position: \"fixed\",\n                    bottom: isOpen ? 80 : 0, \n                    right: 20,\n                    width: 350,\n                    height: isOpen ? 450 : 0,\n                    boxShadow: isOpen ? 5 : 0,\n                    display: \"flex\",\n                    flexDirection: \"column\",\n                    opacity: isOpen ? 1 : 0, \n                    transition: \"opacity 0.3s ease-in-out, height 0.3s ease-in-out\"\n                }}>\n                    <CardContent sx={{ flex: 1, display: \"flex\", flexDirection: \"column\" }}>\n                        <Typography variant=\"h6\" align=\"center\">Chatbot</Typography>\n                        <div ref={chatBoxRef} style={{ flex: 1, overflowY: \"auto\", padding: \"10px\" }}>\n                            {messages.map((msg, index) => (\n                                <div key={index} style={{\n                                    display: \"flex\",\n                                    justifyContent: msg.sender === \"user\" ? \"flex-end\" : \"flex-start\",\n                                    marginBottom: \"10px\"\n                                }}>\n                                    <Typography sx={{\n                                        backgroundColor: msg.sender === \"user\" ? \"#007bff\" : \"#f1f1f1\",\n                                        color: msg.sender === \"user\" ? \"white\" : \"black\",\n                                        padding: \"10px\",\n                                        borderRadius: \"15px\",\n                                        maxWidth: \"75%\",\n                                        wordWrap: \"break-word\",\n                                        textAlign: \"left\",\n                                        lineHeight: \"1.4\"\n                                    }}>\n                                        {msg.text}\n                                    </Typography>\n                                </div>\n                            ))}\n                        </div>\n                        <TextField\n                            fullWidth\n                            variant=\"outlined\"\n                            placeholder=\"Type a message...\"\n                            value={input}\n                            onChange={(e) => setInput(e.target.value)}\n                            onKeyDown={(e) => e.key === \"Enter\" && sendMessage()}\n                        />\n                        <Button fullWidth variant=\"contained\" color=\"primary\" onClick={sendMessage} sx={{ mt: 1 }}>\n                            Send\n                        </Button>\n                    </CardContent>\n                </Card>\n            )}\n        </>\n    );\n};\n\n\nexport default Chatbot;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}